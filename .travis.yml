language: ruby
cache: bundler
bundler_args: --without production

rvm:
 - 2.7.0
 
before_install:
 - gem install bundler:2.2.11

script:
 - bundle exec rspec

deploy:
 provider: heroku
 api_key: 1cc54e7b-9cca-4d49-ab66-158937f7f4de
 app: Portfolio
 run: "rake db:migrate"
 on:
  branch: main_or_master